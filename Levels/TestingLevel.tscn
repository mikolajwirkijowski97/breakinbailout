[gd_scene load_steps=8 format=3 uid="uid://ck7smfpwrumvp"]

[ext_resource type="PackedScene" uid="uid://67jud58vuqlg" path="res://Character/Character.tscn" id="1_a5qav"]
[ext_resource type="Material" uid="uid://cfa2fgjnvjpbq" path="res://assets/Materials/Prototyping/DarkGrid.tres" id="2_3u2r3"]
[ext_resource type="PackedScene" uid="uid://p78ar4qsulgi" path="res://Character/NonPlayerCharacter/NonPlayerCharacter.tscn" id="2_cc1l8"]
[ext_resource type="Script" path="res://Character/NonPlayerCharacter/action_plan.gd" id="3_wvxjp"]
[ext_resource type="Script" path="res://Character/NonPlayerCharacter/action.gd" id="4_7g8rp"]

[sub_resource type="Environment" id="Environment_j2uja"]
ambient_light_color = Color(0.727966, 0.847959, 0.951568, 1)
ambient_light_energy = 1.65

[sub_resource type="NavigationMesh" id="NavigationMesh_l0f7a"]
vertices = PackedVector3Array(6.98277, 0.790047, 0.179691, 7.48277, 0.790047, 0.179691, 7.73277, 1.04005, -0.820309, 6.73277, 1.04005, -0.820309, -28.0172, 1.04005, -9.32031, -28.0172, 1.04005, -0.820309, 37.9828, 1.04005, -9.32031, 37.9828, 1.04005, -0.820309, -28.0172, 3.79005, 0.179691, -28.0172, 3.79005, 44.6797, -27.5172, 3.79005, 28.4297, -7.01723, 3.79005, 10.6797, -6.76723, 3.79005, 16.9297, -6.26723, 3.79005, 10.9297, -6.51723, 3.79005, 0.179691, 6.73277, 1.04005, 0.929691, 7.98277, 1.04005, 9.42969, 7.98277, 1.04005, 0.929691, 6.73277, 1.04005, 9.92969, 6.98277, 0.790047, 10.9297, 7.48277, 0.790047, 10.6797, 7.48277, 1.04005, 9.67969, -5.51723, 1.04005, 0.929691, -5.51723, 1.04005, 9.92969, -26.7672, 1.04005, 0.929691, -26.7672, 1.04005, 9.92969, -7.76723, 1.04005, 9.92969, -7.76723, 1.04005, 0.929691, 17.2328, 1.04005, 5.17969, 18.4828, 0.790047, 4.92969, 18.4828, 0.790047, 4.17969, 17.2328, 1.04005, 3.92969, 8.73277, 1.04005, 9.92969, 17.2328, 1.04005, 9.92969, 17.2328, 1.04005, 0.929691, 19.4828, 1.04005, 3.92969, 19.4828, 1.04005, 5.17969, 36.9828, 1.04005, 0.929691, 19.4828, 1.04005, 9.92969, 36.9828, 1.04005, 9.92969, 19.4828, 1.04005, 0.929691, 17.9828, 3.79005, 10.6797, 18.2328, 3.79005, 18.4297, 18.7328, 3.79005, 10.9297, 18.4828, 3.79005, 5.92969, 6.73277, 1.04005, 27.4297, 6.98277, 0.790047, 28.1797, 7.48277, 0.790047, 28.1797, 7.73277, 1.04005, 27.4297, 17.2328, 1.04005, 19.1797, 7.73277, 1.04005, 11.6797, 6.73277, 1.04005, 11.6797, -5.51723, 1.04005, 18.6797, -5.51723, 1.04005, 27.4297, 17.2328, 1.04005, 20.1797, -6.51723, 0.790047, 17.9297, -6.76723, 0.790047, 18.4297, -5.51723, 1.04005, 17.6797, -5.51723, 1.04005, 11.6797, 18.2328, 0.790047, 19.9297, 18.2328, 0.790047, 19.4297, 17.2328, 1.04005, 27.4297, 17.2328, 1.04005, 11.6797, -7.76723, 1.04005, 17.6797, -8.01723, 1.04005, 18.6797, -26.7672, 1.04005, 27.4297, -7.76723, 1.04005, 27.4297, -26.7672, 1.04005, 11.6797, -7.76723, 1.04005, 11.6797, 19.4828, 1.04005, 20.1797, 19.4828, 1.04005, 19.1797, 36.9828, 1.04005, 27.4297, 36.9828, 1.04005, 11.6797, 19.4828, 1.04005, 27.4297, 19.4828, 1.04005, 11.6797, -7.01723, 3.79005, 28.1797, -6.76723, 3.79005, 44.6797, -6.26723, 3.79005, 28.4297, -6.51723, 3.79005, 19.4297, 17.9828, 3.79005, 28.1797, 18.2328, 3.79005, 37.1797, 18.7328, 3.79005, 28.4297, 18.4828, 3.79005, 20.9297, 6.73277, 0.790047, 29.1797, 7.73277, 0.790047, 29.1797, -5.51723, 1.04005, 29.1797, -5.51723, 1.04005, 44.1797, 17.2328, 1.04005, 44.1797, 17.2328, 1.04005, 29.1797, -26.7672, 1.04005, 29.1797, -26.7672, 1.04005, 44.1797, -7.76723, 1.04005, 44.1797, -7.76723, 1.04005, 29.1797, 18.4828, 0.790047, 38.1797, 18.4828, 0.790047, 38.9297, 19.4828, 1.04005, 39.1797, 19.4828, 1.04005, 37.9297, 36.9828, 1.04005, 29.1797, 19.4828, 1.04005, 29.1797, 36.9828, 1.04005, 44.1797, 19.4828, 1.04005, 44.1797)
polygons = [PackedInt32Array(0, 3, 1), PackedInt32Array(1, 3, 2), PackedInt32Array(5, 4, 3), PackedInt32Array(3, 4, 6), PackedInt32Array(6, 7, 2), PackedInt32Array(6, 2, 3), PackedInt32Array(10, 9, 8), PackedInt32Array(12, 11, 13), PackedInt32Array(13, 11, 14), PackedInt32Array(0, 1, 15), PackedInt32Array(15, 1, 17), PackedInt32Array(15, 17, 16), PackedInt32Array(19, 18, 20), PackedInt32Array(20, 18, 21), PackedInt32Array(21, 18, 16), PackedInt32Array(16, 18, 15), PackedInt32Array(15, 18, 23), PackedInt32Array(15, 23, 22), PackedInt32Array(27, 26, 24), PackedInt32Array(24, 26, 25), PackedInt32Array(29, 28, 30), PackedInt32Array(30, 28, 31), PackedInt32Array(28, 33, 32), PackedInt32Array(16, 17, 32), PackedInt32Array(32, 17, 28), PackedInt32Array(28, 17, 31), PackedInt32Array(17, 34, 31), PackedInt32Array(30, 35, 29), PackedInt32Array(29, 35, 36), PackedInt32Array(36, 35, 37), PackedInt32Array(38, 36, 39), PackedInt32Array(39, 36, 37), PackedInt32Array(35, 40, 37), PackedInt32Array(44, 43, 41), PackedInt32Array(41, 43, 42), PackedInt32Array(46, 45, 47), PackedInt32Array(47, 45, 48), PackedInt32Array(50, 49, 51), PackedInt32Array(51, 49, 45), PackedInt32Array(51, 45, 52), PackedInt32Array(52, 45, 53), PackedInt32Array(19, 20, 51), PackedInt32Array(51, 20, 50), PackedInt32Array(54, 48, 49), PackedInt32Array(49, 48, 45), PackedInt32Array(55, 57, 56), PackedInt32Array(56, 57, 52), PackedInt32Array(57, 58, 51), PackedInt32Array(59, 54, 60), PackedInt32Array(60, 54, 49), PackedInt32Array(52, 57, 51), PackedInt32Array(54, 61, 48), PackedInt32Array(50, 62, 49), PackedInt32Array(55, 56, 63), PackedInt32Array(63, 56, 64), PackedInt32Array(66, 65, 64), PackedInt32Array(64, 65, 67), PackedInt32Array(63, 64, 68), PackedInt32Array(68, 64, 67), PackedInt32Array(60, 70, 59), PackedInt32Array(59, 70, 69), PackedInt32Array(69, 70, 71), PackedInt32Array(71, 70, 72), PackedInt32Array(71, 73, 69), PackedInt32Array(70, 74, 72), PackedInt32Array(78, 77, 75), PackedInt32Array(75, 77, 76), PackedInt32Array(82, 81, 79), PackedInt32Array(79, 81, 80), PackedInt32Array(47, 84, 46), PackedInt32Array(46, 84, 83), PackedInt32Array(85, 83, 86), PackedInt32Array(86, 83, 87), PackedInt32Array(84, 88, 87), PackedInt32Array(83, 84, 87), PackedInt32Array(92, 91, 89), PackedInt32Array(89, 91, 90), PackedInt32Array(93, 96, 94), PackedInt32Array(94, 96, 95), PackedInt32Array(98, 97, 96), PackedInt32Array(96, 97, 99), PackedInt32Array(99, 100, 95), PackedInt32Array(99, 95, 96)]

[node name="TestingLevel" type="WorldEnvironment"]
environment = SubResource("Environment_j2uja")

[node name="MainChar" parent="." instance=ExtResource("1_a5qav")]
transform = Transform3D(0.4, 0, 0, 0, 0.4, 0, 0, 0, 0.4, 0, 1.4512, -6.87743)

[node name="InnocentCharacter" parent="." node_paths=PackedStringArray("action_plan") instance=ExtResource("2_cc1l8")]
transform = Transform3D(0.41, 0, 0, 0, 0.41, 0, 0, 0, 0.41, 6.3417, 1.9551, -6.86498)
action_plan = NodePath("ActionPlan")
call_handle_input = false

[node name="ActionPlan" type="Node3D" parent="InnocentCharacter"]
script = ExtResource("3_wvxjp")

[node name="Location1" type="Marker3D" parent="InnocentCharacter/ActionPlan"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.14524, -3.69251, 18.4767)
gizmo_extents = 0.93
script = ExtResource("4_7g8rp")

[node name="Location2" type="Marker3D" parent="InnocentCharacter/ActionPlan"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -33.4205, -3.69251, 45.7628)
gizmo_extents = 0.93
script = ExtResource("4_7g8rp")

[node name="Location3" type="Marker3D" parent="InnocentCharacter/ActionPlan"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 66.6913, -3.69251, 139.865)
gizmo_extents = 0.93
script = ExtResource("4_7g8rp")

[node name="Sunlight" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.00574682, -0.816984, 0.576632, 0.00814181, 0.57666, 0.816943, -0.99995, 0, 0.00996569, 25.0481, 16.8892, 0)

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_l0f7a")

[node name="CSGCombiner3D" type="CSGCombiner3D" parent="NavigationRegion3D"]
use_collision = true

[node name="Floor" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 4.98279, 0.235787, 17.5239)
size = Vector3(67, 0.891479, 54.6884)
material = ExtResource("2_3u2r3")

[node name="Wall_Entrance" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5.04142, 1.99997, 0)
size = Vector3(67, 3, 0.5)
material = ExtResource("2_3u2r3")

[node name="Wall_EW_Divider1" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 2, 10.7324)
size = Vector3(67, 3, 0.5)
material = ExtResource("2_3u2r3")

[node name="Wall_EW_Divider2" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 2, 28.393)
size = Vector3(67, 3, 0.5)
material = ExtResource("2_3u2r3")

[node name="Wall_South" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 5, 2, 45)
size = Vector3(67, 3, 0.5)
material = ExtResource("2_3u2r3")

[node name="Wall_West" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 38, 2, 22.25)
size = Vector3(1, 3, 45)
material = ExtResource("2_3u2r3")

[node name="Wall_East" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -28, 2, 22.25)
size = Vector3(1, 3, 45)
material = ExtResource("2_3u2r3")

[node name="Wall_NS_Divider1" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 18.2818, 2, 22.25)
size = Vector3(1, 3, 45)
material = ExtResource("2_3u2r3")

[node name="Wall_NS_Divider2" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.51877, 2, 22.25)
size = Vector3(1, 3, 45)
material = ExtResource("2_3u2r3")

[node name="Door" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.11576, 2.25464, 0.144379)
operation = 2
size = Vector3(1.73633, 3.50928, 1.87885)
material = ExtResource("2_3u2r3")

[node name="Door2" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.11576, 2.24463, 10.8795)
operation = 2
size = Vector3(1.73633, 3.48926, 1.87885)
material = ExtResource("2_3u2r3")

[node name="Door5" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 18.1805, 2.24463, 19.6844)
operation = 2
size = Vector3(1.73633, 3.48926, 1.87885)
material = ExtResource("2_3u2r3")

[node name="Door6" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 18.6618, 2.24463, 38.5835)
operation = 2
size = Vector3(1.73633, 3.48926, 1.87885)
material = ExtResource("2_3u2r3")

[node name="Door7" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 18.3567, 2.24463, 4.50539)
operation = 2
size = Vector3(1.73633, 3.48926, 1.87885)
material = ExtResource("2_3u2r3")

[node name="Door3" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.11576, 2.48932, 28.8111)
operation = 2
size = Vector3(1.73633, 3.97864, 1.87885)
material = ExtResource("2_3u2r3")

[node name="Door4" type="CSGBox3D" parent="NavigationRegion3D/CSGCombiner3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.60984, 2.24487, 18.1824)
operation = 2
size = Vector3(1.73633, 3.48975, 1.87885)
material = ExtResource("2_3u2r3")

[connection signal="main_char_position_updated" from="MainChar" to="NavigationRegion3D/CSGCombiner3D/Floor" method="_on_main_char_main_char_position_updated"]
